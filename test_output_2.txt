
> wine-tracker@1.0.7 test
> jest __tests__/integration/process-image.test.ts

  console.log
    [dotenv@17.2.0] injecting env (1) from .env.local (tip: âš™ï¸  load multiple .env files with { path: ['.env.local', '.env'] })

      at _log (node_modules/dotenv/lib/main.js:136:11)

  console.log
    [dotenv@17.2.0] injecting env (0) from .env (tip: ðŸ” encrypt with dotenvx: https://dotenvx.com)

      at _log (node_modules/dotenv/lib/main.js:136:11)

FAIL __tests__/integration/process-image.test.ts (20.48 s)
  Process Image API with Blob URLs
    Ã— should process image from Vercel Blob URL (5010 ms)
    Ã— should handle both file upload and URL processing (5007 ms)
    Ã— should validate image URL format (5012 ms)
    Ã— should handle missing imageUrl when no file provided (5004 ms)

  â— Process Image API with Blob URLs â€º should process image from Vercel Blob URL

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 17 |[39m   })[33m;[39m
     [90m 18 |[39m
    [31m[1m>[22m[39m[90m 19 |[39m   it([32m'should process image from Vercel Blob URL'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m    |[39m   [31m[1m^[22m[39m
     [90m 20 |[39m     [36mconst[39m handler [33m=[39m [36mawait[39m [36mimport[39m([32m'../../pages/api/process'[39m)[33m;[39m
     [90m 21 |[39m
     [90m 22 |[39m     [36mconst[39m mockBlobUrl [33m=[39m [32m'https://test.blob.vercel-storage.com/wine_123456.jpg'[39m[33m;[39m[0m

      at it (__tests__/integration/process-image.test.ts:19:3)
      at Object.describe (__tests__/integration/process-image.test.ts:3:1)

  â— Process Image API with Blob URLs â€º should handle both file upload and URL processing

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 57 |[39m   })[33m;[39m
     [90m 58 |[39m
    [31m[1m>[22m[39m[90m 59 |[39m   it([32m'should handle both file upload and URL processing'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m    |[39m   [31m[1m^[22m[39m
     [90m 60 |[39m     [36mconst[39m handler [33m=[39m [36mawait[39m [36mimport[39m([32m'../../pages/api/process'[39m)[33m;[39m
     [90m 61 |[39m
     [90m 62 |[39m     [36mconst[39m mockBlobUrl [33m=[39m [32m'https://test.blob.vercel-storage.com/wine_123456.jpg'[39m[33m;[39m[0m

      at it (__tests__/integration/process-image.test.ts:59:3)
      at Object.describe (__tests__/integration/process-image.test.ts:3:1)

  â— Process Image API with Blob URLs â€º should validate image URL format

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 86 |[39m   })[33m;[39m
     [90m 87 |[39m
    [31m[1m>[22m[39m[90m 88 |[39m   it([32m'should validate image URL format'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m    |[39m   [31m[1m^[22m[39m
     [90m 89 |[39m     [36mconst[39m handler [33m=[39m [36mawait[39m [36mimport[39m([32m'../../pages/api/process'[39m)[33m;[39m
     [90m 90 |[39m
     [90m 91 |[39m     [36mconst[39m { req[33m,[39m res } [33m=[39m createMocks({[0m

      at it (__tests__/integration/process-image.test.ts:88:3)
      at Object.describe (__tests__/integration/process-image.test.ts:3:1)

  â— Process Image API with Blob URLs â€º should handle missing imageUrl when no file provided

    thrown: "Exceeded timeout of 5000 ms for a test.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

    [0m [90m 107 |[39m   })[33m;[39m
     [90m 108 |[39m
    [31m[1m>[22m[39m[90m 109 |[39m   it([32m'should handle missing imageUrl when no file provided'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m     |[39m   [31m[1m^[22m[39m
     [90m 110 |[39m     [36mconst[39m handler [33m=[39m [36mawait[39m [36mimport[39m([32m'../../pages/api/process'[39m)[33m;[39m
     [90m 111 |[39m
     [90m 112 |[39m     [36mconst[39m { req[33m,[39m res } [33m=[39m createMocks({[0m

      at it (__tests__/integration/process-image.test.ts:109:3)
      at Object.describe (__tests__/integration/process-image.test.ts:3:1)

Test Suites: 1 failed, 1 total
Tests:       4 failed, 4 total
Snapshots:   0 total
Time:        21.1 s
Ran all test suites matching /__tests__\\integration\\process-image.test.ts/i.
